define("local_adaptive_course_audit/tour_launcher",["exports","tool_usertours/usertours"],(function(_exports,_usertours){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * Tour launcher for the adaptive course audit plugin.
   *
   * Detects the `startacatour` URL parameter and starts the specified tour
   * programmatically, bypassing the normal Moodle tour matching which only
   * starts the first matching tour per page.
   *
   * Delegates to tool_usertours/usertours init() so that all event handling
   * (markStepShown, markTourComplete, reset link, resize) is handled by
   * Moodle core.
   *
   * @module     local_adaptive_course_audit/tour_launcher
   * @copyright  2026 Moodle HQ
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const extractTourIdFromUrl=()=>{const urlParams=new URLSearchParams(window.location.search),raw=urlParams.get("startacatour");if(!raw)return null;const parsed=parseInt(raw,10);if(isNaN(parsed)||parsed<=0)return null;urlParams.delete("startacatour");const search=urlParams.toString(),cleaned=window.location.pathname+(search?"?"+search:"")+window.location.hash;return window.history.replaceState(null,"",cleaned),parsed};_exports.init=function(){let continueTour=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,id=extractTourIdFromUrl();if(!id){if(0==continueTour)return;id=continueTour}const isModEdit=-1!==window.location.pathname.indexOf("/course/modedit.php"),startTour=()=>{try{isModEdit&&"function"==typeof window.require&&window.setTimeout((()=>{window.require(["local_adaptive_course_audit/modedit_expander"],(expander=>{try{expander&&"function"==typeof expander.init&&expander.init()}catch(error){window.console.error("[ACA tour_launcher] Expander error",error)}}))}),1500),(0,_usertours.init)([{tourId:id,startTour:!0,filtervalues:{cssselector:[]}}],["tool_usertours/filter_cssselector"])}catch(error){window.console.error("[ACA tour_launcher] Failed to start tour",error)}};window.setTimeout(startTour,500)}}));

//# sourceMappingURL=tour_launcher.min.js.map